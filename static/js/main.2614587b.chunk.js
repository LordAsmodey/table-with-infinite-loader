(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),i=n(8),s=n.n(i),r=(n(13),n(5)),l=n(2),o=(n(14),n(3)),j=n.n(o),d=n(0),b=a.a.memo((function(e){var t=e.rowsInTable,n=e.people,c=e.setNextPage,a=e.isLoading,i=e.onDelete;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("table",{className:"table is-hoverable is-fullwidth p-3",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"ID"}),Object(d.jsx)("th",{children:"First name"}),Object(d.jsx)("th",{children:"Last name"}),Object(d.jsx)("th",{children:"Email"}),Object(d.jsx)("th",{children:"IP Address"}),Object(d.jsx)("th",{children:"Description"}),Object(d.jsx)("th",{children:"Actions"})]})}),Object(d.jsx)("tfoot",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"ID"}),Object(d.jsx)("th",{children:"First name"}),Object(d.jsx)("th",{children:"Last name"}),Object(d.jsx)("th",{children:"Email"}),Object(d.jsx)("th",{children:"IP Address"}),Object(d.jsx)("th",{children:"Description"}),Object(d.jsx)("th",{children:"Actions"})]})}),Object(d.jsx)("tbody",{children:n.map((function(e,t){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:t+1}),Object(d.jsx)("td",{children:e.firstName}),Object(d.jsx)("td",{children:e.lastName}),Object(d.jsx)("td",{children:e.email}),Object(d.jsx)("td",{children:e.ip}),Object(d.jsx)("td",{children:e.description}),Object(d.jsx)("td",{children:Object(d.jsx)("button",{className:"button is-danger is-light",onClick:function(){i(e.id)},type:"button",children:"Delete"})})]},e.id)}))})]}),Object(d.jsx)("div",{className:"is-flex is-justify-content-center",children:Object(d.jsx)("button",{className:j()("button is-info",{"is-loading":a}),onClick:function(){c()},type:"button",disabled:a,children:"Load next ".concat(t," fields")})})]})})),u=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,h=/^([A-Za-z0-9_\-.])+@([A-Za-z0-9_\-.])+\.([A-Za-z]{2,4})$/;var O=function(e){var t=e.name,n=e.value,a=e.label,i=void 0===a?t:a,s=e.required,r=void 0!==s&&s,o=e.minLength,b=void 0===o?0:o,O=e.isEmail,m=void 0!==O&&O,p=e.isIp,f=void 0!==p&&p,x=e.onChange,v=void 0===x?function(){}:x,g=Object(c.useState)((function(){return"".concat(t,"-").concat(Math.random().toString().slice(2))})),N=Object(l.a)(g,1)[0],S=Object(c.useState)(!1),w=Object(l.a)(S,2),y=w[0],C=w[1],k=y&&r&&!n,E=y&&b>n.length,A=y&&!n.match(h)&&m,I=y&&!n.match(u)&&f,D=k||E||A;return Object(d.jsxs)("div",{className:"field",children:[Object(d.jsx)("label",{className:"label",htmlFor:N,children:i}),Object(d.jsx)("div",{className:"control",children:Object(d.jsx)("input",{id:N,"data-cy":"movie-".concat(t),className:j()("input",{"is-danger":D}),type:"text",placeholder:"Enter ".concat(i),value:n,onChange:function(e){return v(e.target.value)},onBlur:function(){return C(!0)}})}),k&&Object(d.jsx)("p",{className:"help is-danger",children:"".concat(i," is required!")}),E&&Object(d.jsx)("p",{className:"help is-danger",children:"Minimum field length is ".concat(b,"!")}),A&&Object(d.jsx)("p",{className:"help is-danger",children:"Email is not valid!"}),I&&Object(d.jsx)("p",{className:"help is-danger",children:"IP format is not valid!"})]})},m="http://localhost:4000/people";var p=a.a.memo((function(e){var t=e.isOpen,n=e.setIsOpen,a=e.onAddPerson,i=Object(c.useState)(""),s=Object(l.a)(i,2),r=s[0],o=s[1],b=Object(c.useState)(""),p=Object(l.a)(b,2),f=p[0],x=p[1],v=Object(c.useState)(""),g=Object(l.a)(v,2),N=g[0],S=g[1],w=Object(c.useState)(""),y=Object(l.a)(w,2),C=y[0],k=y[1],E=Object(c.useState)(""),A=Object(l.a)(E,2),I=A[0],D=A[1],U=Object(c.useState)(!1),L=Object(l.a)(U,2),P=L[0],q=L[1],F=Object(c.useMemo)((function(){return f.length>0&&r.length>0&&N.match(h)&&C.match(u)&&I.length>20}),[r,f,N,C,I]),T=Object(c.useCallback)((function(){o(""),x(""),S(""),k(""),D("")}),[]),_=function(){var e;F&&(q(!1),(e={firstName:r,lastName:f,email:N,ip:C,description:I},fetch("".concat(m),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong")}))).then((function(e){a(e),T(),n(!1)})).catch((function(){return q(!0)})))};return Object(d.jsx)(d.Fragment,{children:t&&Object(d.jsxs)("div",{className:j()("modal",{"is-active":t}),children:[Object(d.jsx)("div",{className:"modal-background"}),Object(d.jsxs)("div",{className:"modal-card",children:[Object(d.jsxs)("header",{className:"modal-card-head",children:[Object(d.jsx)("p",{className:"modal-card-title",children:"Add new person"}),Object(d.jsx)("button",{type:"button",className:"delete","aria-label":"close",onClick:function(){n(!1),T()}})]}),Object(d.jsx)("section",{className:"modal-card-body",children:Object(d.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(d.jsx)(O,{name:"First name",value:r,label:"First name",required:!0,onChange:o}),Object(d.jsx)(O,{name:"Last name",value:f,label:"Last name",required:!0,onChange:x}),Object(d.jsx)(O,{name:"E-mail",value:N,label:"E-mail",required:!0,isEmail:!0,onChange:S}),Object(d.jsx)(O,{name:"Ip Address",value:C,label:"IP Address",isIp:!0,required:!0,onChange:k}),Object(d.jsx)(O,{name:"Description",value:I,label:"Description",minLength:20,required:!0,onChange:D})]})}),Object(d.jsxs)("footer",{className:"modal-card-foot",children:[Object(d.jsx)("button",{type:"button",className:"button is-success",onClick:function(){return _()},disabled:!F,children:"Add person"}),Object(d.jsx)("button",{type:"button",className:"button",onClick:function(){return T()},children:"Clear form"}),P&&Object(d.jsx)("p",{className:"help is-danger",children:"Something went wrong. Try again!"})]})]})]})})})),f=function(){var e=Object(c.useState)(5),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!1),s=Object(l.a)(i,2),o=s[0],j=s[1],u=Object(c.useState)(!1),h=Object(l.a)(u,2),O=h[0],f=h[1],x=Object(c.useState)([]),v=Object(l.a)(x,2),g=v[0],N=v[1],S=Object(c.useState)(1),w=Object(l.a)(S,2),y=w[0],C=w[1],k=Object(c.useState)(!1),E=Object(l.a)(k,2),A=E[0],I=E[1],D=Object(c.useState)(!1),U=Object(l.a)(D,2),L=U[0],P=U[1];Object(c.useEffect)((function(){I(!0),P(!1),function(e,t){return fetch("".concat(m,"?_page=").concat(e,"&_limit=").concat(t)).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong")}))}(y,n).then((function(e){N((function(t){return 1===y?Object(r.a)(e):[].concat(Object(r.a)(t),Object(r.a)(e)).sort((function(e,t){return e.id-t.id})).filter((function(e,t,n){return!n[t+1]||e.id!==n[t+1].id}))}))})).catch((function(){return P(!0)})).finally((function(){return I(!1)}))}),[n,y]);var q=Object(c.useCallback)((function(){C((function(e){return e+1}))}),[]),F=Object(c.useCallback)((function(e){N((function(t){return[].concat(Object(r.a)(t),[e])}))}),[]),T=Object(c.useCallback)((function(e){(function(e){return fetch("".concat(m,"/").concat(e),{method:"DELETE"}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong")}))})(e).then((function(){N((function(t){return t.filter((function(t){return t.id!==e}))}))}))}),[]);return Object(d.jsxs)("div",{className:"box app",children:[Object(d.jsxs)("div",{className:" box is-flex is-justify-content-space-around app__control-items",children:[Object(d.jsx)("button",{type:"button",className:"button is-info",onClick:function(){return f(!0)},children:"Add person"}),Object(d.jsx)("div",{className:"select",children:Object(d.jsxs)("select",{value:n,onChange:function(e){a(+e.target.value),j(!1)},disabled:o,children:[Object(d.jsx)("option",{value:"5",children:"Upload 5 fields"}),Object(d.jsx)("option",{value:"6",children:"Upload 6 fields"}),Object(d.jsx)("option",{value:"7",children:"Upload 7 fields"}),Object(d.jsx)("option",{value:"8",children:"Upload 8 fields"}),Object(d.jsx)("option",{value:"9",children:"Upload 9 fields"}),Object(d.jsx)("option",{value:"10",children:"Upload 10 fields"}),Object(d.jsx)("option",{value:"11",children:"Upload 11 fields"}),Object(d.jsx)("option",{value:"12",children:"Upload 12 fields"}),Object(d.jsx)("option",{value:"13",children:"Upload 13 fields"}),Object(d.jsx)("option",{value:"14",children:"Upload 14 fields"}),Object(d.jsx)("option",{value:"15",children:"Upload 15 fields"})]})})]}),!L&&Object(d.jsx)(b,{people:g,rowsInTable:n,setNextPage:q,isLoading:A,onDelete:T}),Object(d.jsx)(p,{isOpen:O,setIsOpen:f,onAddPerson:F}),L&&Object(d.jsx)("p",{className:"help is-danger",children:"Something went wrong. Try again!"})]})};s.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(f,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.2614587b.chunk.js.map